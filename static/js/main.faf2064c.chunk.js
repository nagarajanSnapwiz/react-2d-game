(this["webpackJsonp2d-game"]=this["webpackJsonp2d-game"]||[]).push([[0],{19:function(e,t,r){e.exports=r(46)},24:function(e,t,r){},45:function(e,t,r){e.exports=r.p+"static/media/wheel.347094cc.png"},46:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(15),i=r.n(a),c=(r(24),r(17)),u=r(2),s=r(5),l=r(1);function f(e,t){return e*t}function d(e,t){return e/t}var h=o.a.createContext(),b=h.Provider;function y(e){var t=e.width,r=e.height,a=(e.shape,e.gravity),i=void 0===a?{x:0,y:9.8}:a,c=(e.enclosed,e.enclosureThickness),h=void 0===c?3:c,b=(e.children,e.scaleFactor),y=void 0===b?60:b,p=e.allowSleep,v=void 0===p||p,m=e.backgroundColor,w=void 0===m?0:m,g=e.antialias,x=void 0===g||g,C=(Object(s.a)(e,["width","height","shape","gravity","enclosed","enclosureThickness","children","scaleFactor","allowSleep","backgroundColor","antialias"]),Object(n.useRef)(new u.b({width:t,height:r,backgroundColor:w,antialias:x}))),O=Object(n.useRef)(new u.a),j=Object(n.useRef)(),S=Object(n.useRef)(new l.b2World(new l.b2Vec2(i.x,i.y)));return S.current.scaleFactor=y,S.current.stage=O.current,Object(n.useLayoutEffect)((function(){j.current.append(C.current.view),S.current.SetAllowSleeping(v),function(e,t,r,n,o){var a=new l.b2BodyDef;a.type=l.b2BodyType.b2_staticBody;var i=new l.b2FixtureDef;i.shape=new l.b2PolygonShape,i.density=1,i.friction=.5,i.restitution=0,i.shape.SetAsBox(d(r/2,o),d(t/2,o)),a.position.x=d(r/2,o),a.position.y=d(t/2,o);var c=n.CreateBody(a).CreateFixture(i);c.m_body.SetUserData({category:"_LEFT_WALL_"}),i.shape.SetAsBox(d(e/2,o),d(r/2,o)),a.position.x=d(e/2,o),a.position.y=d(t,o),(c=n.CreateBody(a).CreateFixture(i)).m_body.SetUserData({category:"_BOTTOM_WALL_"}),i.shape.SetAsBox(d(e/2,o),d(r/2,o)),a.position.x=d(e/2,o),a.position.y=d(r/2,o),(c=n.CreateBody(a).CreateFixture(i)).m_body.SetUserData({category:"_TOP_WALL_"}),i.shape.SetAsBox(d(r/2,o),d(t/2,o)),a.position.x=d(e,o),a.position.y=d(t/2,o),(c=n.CreateBody(a).CreateFixture(i)).m_body.SetUserData({category:"_RIGHT_WALL_"})}(t,r,h,S.current,y)}),[]),function(e){var t=o.a.useRef(),r=o.a.useRef(),n=function n(o){if(void 0!=r.current){var a=o-r.current;e(a)}r.current=o,t.current=requestAnimationFrame(n)};o.a.useEffect((function(){return t.current=requestAnimationFrame(n),function(){return cancelAnimationFrame(t.current)}}),[])}((function(e){S.current.Step(1/60,10,10),S.current.ClearForces();for(var t=S.current.m_bodyList;t;t=t.m_next)if(t.IsAwake()){var r=t.GetUserData();if(r&&r.hostRef&&r.hostRef.current)if(r.removed)S.current.DestroyBody(t);else{var n=t.GetPosition(),o=n.x,a=n.y,i=t.GetAngle();Object.assign(r.hostRef.current,{x:f(o,y),y:f(a,y),rotation:i})}}C.current.render(O.current)})),{world:S.current,domRef:j}}function p(e){var t=e.children,r=y(Object(s.a)(e,["children"])),n=r.world,a=r.domRef;return o.a.createElement(b,{value:n},o.a.createElement("div",{ref:a}),t)}var v=.017453292519943295;var m=Object(n.forwardRef)((function(e,t){var r=e.url,o=e.texture,a=e.fromCanvas,i=void 0!==a&&a,c=Object(s.a)(e,["url","texture","fromCanvas"]),f=Object(n.useContext)(h),b=function(e){var t=e.fixed,r=void 0!==t&&t,o=e.restitution,a=void 0===o?.1:o,i=e.friction,c=void 0===i?.5:i,u=e.density,s=void 0===u?1:u,f=e.shape,b=void 0===f?"box":f,y=e.category,p=void 0===y?null:y,m=e.data,w=e.width,g=e.height,x=e.x,C=e.y,O=e.initialForce,j=e.initialImpulse,S=e.bullet,E=e.radius,R=e.angle,A=Object(n.useContext)(h),B=A.scaleFactor,F=Object(n.useRef)(),_=Object(n.useRef)();return Object(n.useEffect)((function(){var e=new l.b2BodyDef;e.type=r?l.b2BodyType.b2_staticBody:l.b2BodyType.b2_dynamicBody;var t=new l.b2FixtureDef;t.shape=new l.b2PolygonShape,Object.assign(t,{density:s,friction:c,restitution:a}),x&&(e.position.x=d(x,B)),C&&(e.position.y=d(C,B));var n=A.CreateBody(e);if("box"===b)t.shape=new l.b2PolygonShape,t.shape.SetAsBox(d(w/2,B),d(g/2,B)),n.CreateFixture(t);else{if("circle"!==b)throw new Error("Unknown shape ".concat(b,", only box and circle supported for now"));t.shape=new l.b2CircleShape(d(E,B)),n.CreateFixture(t)}var o={category:p,hostRef:_};return m&&(o.data=m),n.SetUserData(o),S&&n.SetBullet(S),O&&n.ApplyForce(new l.b2Vec2(O.x,O.y),n.GetWorldCenter()),j&&n.ApplyLinearImpulse(new l.b2Vec2(j.x,j.y),n.GetWorldCenter()),F.current=n,function(){var e=n.GetUserData();e.removed=!0,n.SetUserData(e),n.SetAwake(!0)}}),[]),Object(n.useEffect)((function(){if(r&&F.current){F.current.SetPositionXY(d(x,B),d(C,B));var e=F.current;R&&e.SetAngle(R*v)}}),[x,C,R]),{physObjectRef:F,hostRef:_}}(c),y=b.physObjectRef,p=b.hostRef;return Object(n.useImperativeHandle)(t,(function(){return{body:y,applyForce:function(e){var t=e.x,r=e.y,n=y.current;n.ApplyForce(new l.b2Vec2(t,r),n.GetWorldCenter())},applyImpulse:function(e){var t=e.x,r=e.y,n=y.current;n.ApplyLinearImpulse(new l.b2Vec2(t,r),n.GetWorldCenter())}}})),Object(n.useEffect)((function(){var e;r?e=u.c.from(r):i?e=u.c.from(function(e){var t=e.width,r=e.height,n=e.shape,o=void 0===n?"box":n,a=(e.radius,e.quality),i=void 0===a?500:a,c=e.fill,s=void 0===c?"grey":c,l=(e.stroke,e.strokeWidth,document.createElement("canvas")),f=l.getContext("2d");if(console.log("canvinhjjh props",{fill:s,shape:o}),f.fillStyle=s,"box"===o){var d=t/r;l.width=d*i,l.height=i,f.fillStyle=s,f.fillRect(0,0,l.width,l.height)}else{if("circle"!==o)throw new Error("Unknow Shape ".concat(o));l.width=2*i,l.height=2*i,f.beginPath(),f.arc(i,i,i,0,2*Math.PI),f.closePath(),f.fillStyle="red",f.fill()}return console.log("canvas",l),u.d.from(l)}(c)):o&&(e=u.c.from(o)),console.log("image",e),"circle"===c.shape?(e.width=2*c.radius,e.height=2*c.radius):(e.width=c.width,e.height=c.height),e.anchor.set(.5),p.current=e,f.stage.addChild(e)}),[]),null}));r(18);function w(e){var t=e.anchors,r=e.collideConected,o=e.enableLimit,a=e.motorSpeed,i=void 0===a?0:a,c=e.maxMotorTorque,u=void 0===c?0:c,s=e.ref1,f=e.ref2,b=e.enableMotor,y=Object(n.useContext)(h),p=y.scaleFactor,v=Object(n.useRef)();return Object(n.useEffect)((function(){var e=new l.b2RevoluteJointDef;e.bodyA=s.current.body.current,e.bodyB=f.current.body.current;var n=t[0],o=n.x,a=n.y,i=t[1],c=i.x,u=i.y;e.localAnchorA=new l.b2Vec2(d(o,p),d(a,p)),e.localAnchorB=new l.b2Vec2(d(c,p),d(u,p)),e.collideConnected=r;var h=y.CreateJoint(e);return v.current=h,function(){y.DestroyJoint(h)}}),[t,s.current,f.current]),Object(n.useEffect)((function(){var e=v.current;e.EnableLimit(o),e.EnableMotor(b),e.SetMotorSpeed(i),u&&e.SetMaxMotorTorque(u)}),[o,b,i,u]),v}var g=r(10);o.a.createContext(),r(45);var x=Object(n.forwardRef)((function(e,t){return o.a.createElement(m,Object.assign({ref:t,radius:20,shape:"circle",url:"/wheel.png"},e))})),C=(Object(n.forwardRef)((function(e,t){return o.a.createElement(m,Object.assign({ref:t,width:26,height:37,shape:"box"},e))})),{backgroundColor:1087931,height:400,width:1e3}),O=[{x:0,y:0},{x:-42,y:15}],j=[{x:42,y:15},{x:0,y:0}];function S(){var e=Object(n.useState)(0),t=Object(c.a)(e,2),r=t[0],a=t[1];Object(g.a)("ArrowRight",(function(){a(Math.PI/180*5400*-1)})),Object(g.a)("ArrowLeft",(function(){a(Math.PI/180*5400)}));var i=Object(n.useRef)(),u=Object(n.useRef)(),s=Object(n.useRef)();w({enableMotor:!0,motorSpeed:r,maxMotorTorque:4,anchors:O,ref1:i,ref2:s}),w({enableMotor:!1,anchors:j,ref1:s,ref2:u});return o.a.createElement(n.Fragment,null,o.a.createElement(x,{ref:i,x:30,y:100,density:3}),o.a.createElement(x,{ref:u,x:30,y:100,density:3}),o.a.createElement(m,{density:1.5,ref:s,fromCanvas:!0,width:100,height:35,x:160,y:270,fill:"violet"}),o.a.createElement(m,{fixed:!0,angle:-1,density:1.5,fromCanvas:!0,width:200,height:18,x:400,y:374,fill:"green"}),o.a.createElement(m,{density:1.5,fromCanvas:!0,width:40,height:60,x:500,y:200,fill:"green"}),o.a.createElement("button",{onClick:function(){return a(Math.PI/180*5400*-1)}},"go"),o.a.createElement("button",{onClick:function(){return a(Math.PI/180*5400)}},"Reverse"),o.a.createElement("button",{onClick:function(){return a(0)}},"Stop"))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement((function(){return o.a.createElement(p,C,o.a.createElement(S,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.faf2064c.chunk.js.map